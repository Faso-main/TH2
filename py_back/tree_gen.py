import json, os
from typing import List, Dict, Any

class ProductTreeGenerator:
    """Генератор дерева товаров с 50 верхними категориями"""
    
    def __init__(self):
        self.categories = {
            "Электроника": {
                "Смартфоны и гаджеты": ["Смартфоны", "Планшеты", "Умные часы", "Фитнес-браслеты"],
                "Компьютерная техника": ["Ноутбуки", "Системные блоки", "Мониторы", "Периферия"],
                "Бытовая электроника": ["Телевизоры", "Аудиотехника", "Фототехника", "Игровые консоли"]
            },
            "Бытовая техника": {
                "Крупная техника": ["Холодильники", "Стиральные машины", "Плиты", "Посудомойки"],
                "Кухонная техника": ["Микроволновки", "Кофеварки", "Блендеры", "Мультиварки"],
                "Климатическая техника": ["Кондиционеры", "Обогреватели", "Вентиляторы", "Увлажнители"]
            },
            "Одежда": {
                "Мужская": ["Верхняя одежда", "Футболки и рубашки", "Брюки и джинсы", "Обувь"],
                "Женская": ["Платья и юбки", "Блузки и топы", "Брюки", "Обувь"],
                "Детская": ["Для мальчиков", "Для девочек", "Обувь", "Школьная форма"]
            },
            "Мебель": {
                "Для гостиной": ["Диваны и кресла", "Столы", "Стенки", "Стулья"],
                "Для спальни": ["Кровати", "Шкафы", "Тумбы", "Матрасы"],
                "Для кухни": ["Кухонные гарнитуры", "Обеденные группы", "Стулья", "Бары"]
            },
            "Спорттовары": {
                "Тренажеры": ["Кардиотренажеры", "Силовые тренажеры", "Фитнес-аксессуары"],
                "Спортивный инвентарь": ["Мячи", "Гантели", "Скакалки", "Экипировка"],
                "Активный отдых": ["Велосипеды", "Туризм", "Рыбалка", "Зимние виды"]
            },
            "Канцтовары": {
                "Письменные принадлежности": ["Ручки", "Карандаши", "Маркеры", "Текстовыделители"],
                "Бумажная продукция": ["Тетради", "Блокноты", "Бумага", "Ежедневники"],
                "Офисные принадлежности": ["Папки", "Файлы", "Дыроколы", "Степлеры"]
            },
            "Автозапчасти": {
                "Двигатель": ["Фильтры", "Свечи", "Ремни ГРМ", "Масла"],
                "Ходовая часть": ["Амортизаторы", "Пружины", "Рычаги", "Стойки"],
                "Электрооборудование": ["Аккумуляторы", "Генераторы", "Стартеры", "Провода"]
            },
            "Строительные материалы": {
                "Отделочные материалы": ["Обои", "Линолеум", "Ламинат", "Плитка"],
                "Сухие смеси": ["Штукатурка", "Шпаклевка", "Клей", "Цемент"],
                "Инструменты": ["Ручные инструменты", "Электроинструменты", "Измерительные"]
            },
            "Косметика": {
                "Уходовая": ["Кремы", "Сыворотки", "Тоники", "Маски"],
                "Декоративная": ["Тональные средства", "Помады", "Тени", "Тушь"],
                "Парфюмерия": ["Туалетная вода", "Духи", "Одеколоны", "Спреи"]
            },
            "Продукты питания": {
                "Бакалея": ["Крупы", "Макароны", "Мука", "Сахар"],
                "Молочные продукты": ["Молоко", "Сыр", "Творог", "Йогурты"],
                "Мясо и колбасы": ["Говядина", "Свинина", "Курица", "Колбасы"]
            },
            "Инструменты": {
                "Ручные инструменты": ["Молотки", "Отвертки", "Гаечные ключи", "Плоскогубцы"],
                "Электроинструменты": ["Дрели", "Шуруповерты", "Перфораторы", "Шлифмашины"],
                "Измерительные": ["Рулетки", "Уровни", "Штангенциркули", "Лазерные нивелиры"]
            },
            "Товары для дома": {
                "Текстиль": ["Постельное белье", "Полотенца", "Шторы", "Ковры"],
                "Декор": ["Вазы", "Картины", "Светильники", "Часы"],
                "Хозтовары": ["Моющие средства", "Губки", "Перчатки", "Мешки для мусора"]
            },
            "Ювелирные изделия": {
                "Золотые": ["Кольца", "Серьги", "Цепочки", "Браслеты"],
                "Серебряные": ["Кольца", "Серьги", "Цепочки", "Браслеты"],
                "Бижутерия": ["Броши", "Кулоны", "Запонки", "Зажимы для галстука"]
            },
            "Часы": {
                "Наручные": ["Механические", "Кварцевые", "Смарт-часы", "Люксовые"],
                "Настенные": ["Кухонные", "Офисные", "Декоративные", "С будильником"],
                "Карманные": ["Винтажные", "Антикварные", "Подарочные"]
            },
            "Сумки и аксессуары": {
                "Сумки": ["Рюкзаки", "Клатчи", "Портфели", "Дорожные"],
                "Кошельки": ["Мужские", "Женские", "Кожаные", "Бюджетные"],
                "Ремни и пояса": ["Кожаные", "Тканевые", "Формальные", "Повседневные"]
            },
            "Обувь": {
                "Мужская": ["Туфли", "Кроссовки", "Ботинки", "Сандалии"],
                "Женская": ["Туфли", "Кроссовки", "Ботинки", "Босоножки"],
                "Детская": ["Кроссовки", "Сандалии", "Тапочки", "Резиновые сапоги"]
            },
            "Книги": {
                "Художественная": ["Романы", "Детективы", "Фантастика", "Классика"],
                "Образовательная": ["Учебники", "Справочники", "Энциклопедии", "Научная"],
                "Детская": ["Сказки", "Развивающие", "Раскраски", "Комиксы"]
            },
            "Игрушки": {
                "Развивающие": ["Конструкторы", "Пазлы", "Мозаики", "Сортеры"],
                "Куклы": ["Барби", "Пупсы", "Модные куклы", "Аксессуары"],
                "Транспорт": ["Машинки", "Самолеты", "Поезда", "Треки"]
            },
            "Товары для животных": {
                "Корма": ["Сухие корма", "Влажные корма", "Лакомства", "Витамины"],
                "Аксессуары": ["Ошейники", "Поводки", "Миски", "Лежанки"],
                "Гигиена": ["Шампуни", "Расчески", "Наполнители", "Пеленки"]
            },
            "Сад и огород": {
                "Растения": ["Цветы", "Кустарники", "Деревья", "Рассада"],
                "Инструменты": ["Лопаты", "Грабли", "Секаторы", "Пилы"],
                "Удобрения": ["Органические", "Минеральные", "Стимуляторы", "Грунты"]
            },
            "Офисное оборудование": {
                "Печатающее": ["Принтеры", "МФУ", "Копиры", "Факсы"],
                "Презентационное": ["Проекторы", "Экраны", "Интерактивные доски"],
                "Оргтехника": ["Шредеры", "Ламинаторы", "Биндеры", "Резаки"]
            },
            "Сетевое оборудование": {
                "Беспроводное": ["Роутеры", "Точки доступа", "Адаптеры", "Репитеры"],
                "Проводное": ["Коммутаторы", "Маршрутизаторы", "Модемы", "Патч-панели"],
                "Кабели": ["Ethernet", "Оптоволокно", "Коаксиальные", "USB"]
            },
            "Музыкальные инструменты": {
                "Клавишные": ["Пианино", "Синтезаторы", "Миди-клавиатуры", "Аккордеоны"],
                "Струнные": ["Гитары", "Скрипки", "Виолончели", "Балалайки"],
                "Ударные": ["Барабаны", "Тарелки", "Ксилофоны", "Бонги"]
            },
            "Туризм и отдых": {
                "Снаряжение": ["Палатки", "Спальники", "Рюкзаки", "Горелки"],
                "Одежда": ["Куртки", "Термобелье", "Трекинговые ботинки", "Дождевики"],
                "Аксессуары": ["Фонари", "Термосы", "Компасы", "Мультитулы"]
            },
            "Медицинские товары": {
                "Аптечки": ["Автомобильные", "Домашние", "Походные", "Профессиональные"],
                "Приборы": ["Тонометры", "Глюкометры", "Термометры", "Ингаляторы"],
                "Перевязочные": ["Бинты", "Пластыри", "Салфетки", "Вата"]
            },
            "Стройтехника": {
                "Бетонное оборудование": ["Бетономешалки", "Виброплиты", "Виброрейки", "Затирочные"],
                "Подъемное": ["Леса", "Вышки", "Тачки", "Подъемники"],
                "Электро": ["Генераторы", "Сварочные аппараты", "Преобразователи"]
            },
            "Промышленное оборудование": {
                "Станки": ["Токарные", "Фрезерные", "Сверлильные", "Шлифовальные"],
                "Компрессоры": ["Поршневые", "Винтовые", "Мембранные", "Стационарные"],
                "Насосы": ["Водяные", "Масляные", "Вакуумные", "Циркуляционные"]
            },
            "Медицинское оборудование": {
                "Диагностическое": ["УЗИ", "ЭКГ", "Рентген", "Томографы"],
                "Хирургическое": ["Скальпели", "Зажимы", "Зеркала", "Шприцы"],
                "Лабораторное": ["Микроскопы", "Центрифуги", "Анализаторы", "Термостаты"]
            },
            "Образовательные товары": {
                "Школьные": ["Ранцы", "Пеналы", "Канцтовары", "Форма"],
                "Развивающие": ["Микроскопы", "Телескопы", "Глобусы", "Карты"],
                "Методические": ["Пособия", "Плакаты", "Дидактические", "Тесты"]
            },
            "Химическая продукция": {
                "Лаки и краски": ["Эмали", "Акриловые", "Масляные", "Аэрозоли"],
                "Клеи": ["Универсальные", "Специализированные", "Моментальные", "Эпоксидные"],
                "Реактивы": ["Лабораторные", "Технические", "Чистые", "Особо чистые"]
            },
            "Текстиль и ткани": {
                "Натуральные": ["Хлопок", "Лен", "Шелк", "Шерсть"],
                "Синтетические": ["Полиэстер", "Нейлон", "Акрил", "Микрофибра"],
                "Смесовые": ["Хлопок-полиэстер", "Лен-вискоза", "Шерсть-акрил"]
            },
            "Посуда и кухонные принадлежности": {
                "Столовая": ["Тарелки", "Блюда", "Чашки", "Столовые приборы"],
                "Кухонная": ["Кастрюли", "Сковороды", "Ножи", "Разделочные доски"],
                "Сервировка": ["Сервизы", "Чайные наборы", "Кофейные", "Барные"]
            },
            "Вино и алкоголь": {
                "Вино": ["Красное", "Белое", "Розовое", "Игристое"],
                "Крепкие напитки": ["Водка", "Виски", "Коньяк", "Ром"],
                "Пиво": ["Светлое", "Темное", "Крафтовое", "Безалкогольное"]
            },
            "Табачные изделия": {
                "Сигареты": ["Легкие", "Крепкие", "Ментоловые", "Зарубежные"],
                "Сигары": ["Кубинские", "Доминиканские", "Никарагуанские"],
                "Аксессуары": ["Зажигалки", "Портсигары", "Пепельницы", "Курки"]
            },
            "Цифровые товары": {
                "Программное обеспечение": ["Офисное", "Графическое", "Антивирусы", "Игры"],
                "Электронные книги": ["Художественные", "Образовательные", "Научные", "Детские"],
                "Подписки": ["Стриминговые", "Облачные", "Образовательные", "Игровые"]
            },
            "Сельхозтехника": {
                "Трактора": ["Колесные", "Гусеничные", "Мини-трактора", "Садовые"],
                "Навесное": ["Плуги", "Бороны", "Сеялки", "Косилки"],
                "Уборочная": ["Комбайны", "Жатки", "Пресс-подборщики", "Косилки"]
            },
            "Металлопрокат": {
                "Черный металл": ["Арматура", "Уголок", "Швеллер", "Трубы"],
                "Цветной металл": ["Алюминий", "Медь", "Латунь", "Бронза"],
                "Нержавейка": ["Листы", "Трубы", "Пруток", "Уголок"]
            },
            "Электротехника": {
                "Кабельная продукция": ["Силовые", "Контрольные", "Монтажные", "Связи"],
                "Щитовое оборудование": ["Щиты", "Автоматы", "УЗО", "Счетчики"],
                "Светотехника": ["Лампы", "Светильники", "Прожекторы", "Панели"]
            },
            "Сантехника": {
                "Трубы и фитинги": ["Полипропилен", "Металлопластик", "ПВХ", "Чугун"],
                "Смесители": ["Для ванной", "Для кухни", "Для душа", "Термостатические"],
                "Санфаянс": ["Унитазы", "Раковины", "Ванны", "Биде"]
            },
            "Аксессуары для телефонов": {
                "Чехлы": ["Силиконовые", "Кожаные", "Пластиковые", "Бронированные"],
                "Защитные стекла": ["Глянцевые", "Матовые", "Пленки", "Жидкие"],
                "Кабели и адаптеры": ["USB", "Type-C", "Lightning", "Адаптеры"]
            },
            "Игры и развлечения": {
                "Настольные игры": ["Стратегии", "Карточные", "Детские", "Интеллектуальные"],
                "Головоломки": ["Кубик Рубика", "Пазлы", "Лабиринты", "Судоку"],
                "Развлекательные": ["Дартс", "Пневматика", "Баскетбол", "Футбол"]
            },
            "Подарки и сувениры": {
                "Подарочные наборы": ["Для мужчин", "Для женщин", "Для детей", "Универсальные"],
                "Сувениры": ["Магниты", "Статуэтки", "Кубки", "Медали"],
                "Цветы": ["Букеты", "Композиции", "Горшечные", "Искусственные"]
            },
            "Охотничьи товары": {
                "Оружие": ["Ружья", "Карабины", "Пневматика", "Луки"],
                "Одежда": ["Камуфляж", "Куртки", "Брюки", "Обувь"],
                "Снаряжение": ["Патроны", "Прицелы", "Ножи", "Рюкзаки"]
            },
            "Рыболовные товары": {
                "Удочки": ["Поплавочные", "Спиннинги", "Фидерные", "Зимние"],
                "Катушки": ["Безынерционные", "Мультипликаторные", "Инерционные"],
                "Приманки": ["Блесны", "Воблеры", "Мушки", "Силиконовые"]
            },
            "Велосипеды и аксессуары": {
                "Велосипеды": ["Горные", "Городские", "Шоссейные", "Детские"],
                "Запчасти": ["Колеса", "Тормоза", "Переключатели", "Цепи"],
                "Аксессуары": ["Шлемы", "Фонари", "Замки", "Насосы"]
            },
            "Мототехника": {
                "Мотоциклы": ["Спортивные", "Круизеры", "Эндуро", "Скутеры"],
                "Экипировка": ["Шлемы", "Куртки", "Перчатки", "Ботинки"],
                "Запчасти": ["Двигатели", "Аккумуляторы", "Шины", "Тормоза"]
            },
            "Лодки и катера": {
                "Лодки": ["Надувные", "Гребные", "Моторные", "Парусные"],
                "Катера": ["Прогулочные", "Рыболовные", "Спортивные", "Глиссирующие"],
                "Аксессуары": ["Моторы", "Спасательные жилеты", "Якоря", "Весла"]
            },
            "Воздушная техника": {
                "Дроны": ["Любительские", "Профессиональные", "Гоночные", "С камерой"],
                "Квадрокоптеры": ["Мини", "Стандартные", "Профессиональные", "Игрушечные"],
                "Аксессуары": ["Аккумуляторы", "Пульты", "Камеры", "Запчасти"]
            },
            "Фото- и видеотехника": {
                "Фотоаппараты": ["Зеркальные", "Беззеркальные", "Компактные", "Пленочные"],
                "Объективы": ["Широкоугольные", "Телеобъективы", "Портретные", "Макро"],
                "Аксессуары": ["Штативы", "Вспышки", "Фильтры", "Сумки"]
            },
            "Аудиотехника": {
                "Наушники": ["Накладные", "Вкладыши", "Полноразмерные", "Беспроводные"],
                "Колонки": ["Портативные", "Стационарные", "Сабвуферы", "Мониторные"],
                "Усилители": ["Для дома", "Автомобильные", "Профессиональные", "Гитарные"]
            },
            "Электротранспорт": {
                "Гироскутеры": ["Мини", "Стандартные", "Внедорожные", "Детские"],
                "Электросамокаты": ["Городские", "Внедорожные", "Складные", "Детские"],
                "Моноколеса": ["Начинающие", "Продвинутые", "Профессиональные"]
            },
            "Умный дом": {
                "Управление": ["Хабы", "Датчики", "Контроллеры", "Пульты"],
                "Безопасность": ["Камеры", "Датчики движения", "Системы доступа", "Сигнализации"],
                "Комфорт": ["Умные лампы", "Термостаты", "Розетки", "Выключатели"]
            },
            "Видеоигры": {
                "Игры": ["Экшн", "RPG", "Стратегии", "Симуляторы"],
                "Консоли": ["PlayStation", "Xbox", "Nintendo", "Портативные"],
                "Аксессуары": ["Джойстики", "Рули", "VR-очки", "Карты памяти"]
            }
        }

    def generate_tree(self) -> List[Dict[str, Any]]:
        """Генерирует дерево товаров с тремя уровнями вложенности"""
        tree = []
        category_id = 1
        
        for category_name, subcategories in self.categories.items():
            category_node = {
                "id": category_id,
                "name": category_name,
                "level": 1,
                "children": []
            }
            subcategory_id = category_id * 100
            
            for subcat_name, groups in subcategories.items():
                subcategory_node = {
                    "id": subcategory_id,
                    "name": subcat_name,
                    "level": 2,
                    "children": []
                }
                group_id = subcategory_id * 100
                
                for group_name in groups:
                    group_node = {
                        "id": group_id,
                        "name": group_name,
                        "level": 3
                    }
                    subcategory_node["children"].append(group_node)
                    group_id += 1
                
                category_node["children"].append(subcategory_node)
                subcategory_id += 1
            
            tree.append(category_node)
            category_id += 1
        
        return tree

    def save_to_json(self, filename: str = "big_product_tree.json"):
        """Сохраняет дерево в JSON файл"""
        tree = self.generate_tree()
        
        result = {
            "tree_name": "Большое дерево товаров - 50 категорий",
            "description": "50 верхних категорий с трехуровневой структурой",
            "total_categories": len(tree),
            "categories": tree
        }
        
        with open(filename, 'w', encoding='utf-8') as f:
            json.dump(result, f, ensure_ascii=False, indent=2)
        
        print(f"Дерево сохранено в файл: {filename}")
        print(f"Количество корневых категорий: {len(tree)}")
        
        # Подсчет общего количества элементов
        total_items = 0
        for category in tree:
            total_items += 1  # сама категория
            for subcategory in category["children"]:
                total_items += 1  # подкатегория
                total_items += len(subcategory["children"])  # группы
        
        print(f"Общее количество элементов: {total_items}")

def main():
    """Основная функция"""
    print("Генерация большого дерева товаров (50 категорий)...")
    
    generator = ProductTreeGenerator()
    generator.save_to_json(os.path.join('py_back','result.json'))
    
if __name__ == "__main__":
    main()